/*!
* jQuery appendGrid v1.4.2
* https://appendgrid.apphb.com/
*
* Copyright 2014 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v1.9.1+
* jquery UI v1.10.2+
*/
(function(g){var s={caption:null,captionTooltip:null,initRows:3,initData:null,columns:null,i18n:null,idPrefix:null,rowDragging:false,hideButtons:null,hideRowNumColumn:false,rowButtonsInFront:false,buttonClasses:null,sectionClasses:null,customGridButtons:null,customRowButtons:null,customFooterButtons:null,nameFormatter:null,dataLoaded:null,rowDataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null,afterRowDragged:null};var y={type:"text",name:null,value:null,display:null,displayCss:null,displayTooltip:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,uiOption:null,uiTooltip:null,resizable:false,invisible:false,emptyCriteria:null,customBuilder:null,customGetter:null,customSetter:null,onClick:null,onChange:null};var t={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "};var w={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"};var l={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null};var n={caption:null,header:null,body:null,footer:null};var f={append:false,removeLast:false,insert:false,remove:false,moveUp:false,moveDown:false};var k={init:function(G){var U=this;if(U.length>0){if(!g.isArray(G.columns)||G.columns.length==0){alert(t.noColumnInfo);return U}var P=U[0],H,L,T,R,D;if(o(P.tagName)||P.tagName!="TABLE"){alert(t.elemNotTable);return U}var S=g.extend({},s,G);g.extend(S,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:false,_visibleCount:0,_finalColSpan:0,_hideLastColumn:false});if(g.isPlainObject(G.i18n)){S._i18n=g.extend({},w,G.i18n)}else{S._i18n=g.extend({},w)}if(g.isPlainObject(G.buttonClasses)){S._buttonClasses=g.extend({},l,G.buttonClasses)}else{S._buttonClasses=g.extend({},l)}if(g.isPlainObject(G.sectionClasses)){S._sectionClasses=g.extend({},n,G.sectionClasses)}else{S._sectionClasses=g.extend({},n)}if(g.isPlainObject(G.hideButtons)){S.hideButtons=g.extend({},f,G.hideButtons)}else{S.hideButtons=g.extend({},f)}if(o(S.idPrefix)){if(o(P.id)||P.id==""){S.idPrefix="ag"+new Date().getTime()}else{S.idPrefix=P.id}}if(!g.isPlainObject(S.customGridButtons)){S.customGridButtons={}}H=document.createElement("thead");H.className="ui-widget-header";L=document.createElement("tbody");L.className="ui-widget-content";T=document.createElement("tfoot");T.className="ui-widget-header";g(P).empty().addClass("appendGrid ui-widget").append(H,L,T);var E,O;R=H.insertRow(-1);if(S._sectionClasses.header){R.className=S._sectionClasses.header}if(!S.hideRowNumColumn){E=R.insertCell(-1);E.className="ui-widget-header"}var I=0;for(var J=0;J<S.columns.length;J++){var N=g.extend({},y,S.columns[J]);S.columns[J]=N;if(S.columns[J].type!="hidden"){if(!S.columns[J].invisible){S._visibleCount++}if(I==0){var F="ui-widget-header";if(S.columns[J].invisible){F+=" invisible"}if(S.columns[J].resizable){F+=" resizable"}D=R.insertCell(-1);D.id=S.idPrefix+"_"+S.columns[J].name+"_td_head";D.className=F;if(S.columns[J].displayCss){g(D).css(S.columns[J].displayCss)}if(S.columns[J].headerSpan>1){g(D).attr("colSpan",S.columns[J].headerSpan);I=S.columns[J].headerSpan-1}if(g.isPlainObject(S.columns[J].displayTooltip)){g(D).tooltip(S.columns[J].displayTooltip)}else{if(!o(S.columns[J].displayTooltip)){g(D).attr("title",S.columns[J].displayTooltip).tooltip()}}if(typeof(S.columns[J].display)=="function"){S.columns[J].display(D)}else{if(!o(S.columns[J].display)){g(D).text(S.columns[J].display)}}}else{I--}}}g("td.resizable",H).resizable({handles:"e"});if(S.hideButtons.insert&&S.hideButtons.remove&&S.hideButtons.moveUp&&S.hideButtons.moveDown&&(!g.isArray(S.customRowButtons)||S.customRowButtons.length==0)){S._hideLastColumn=true}S._finalColSpan=S._visibleCount;if(!S.hideRowNumColumn){S._finalColSpan++}if(!S._hideLastColumn){S._finalColSpan++}if(!S._hideLastColumn){if(S.rowButtonsInFront){if(S.hideRowNumColumn){O=R.insertCell(0)}else{E.colSpan=2;O=E}}else{O=R.insertCell(-1)}O.className="ui-widget-header"}if(S.caption){R=H.insertRow(0);if(S._sectionClasses.caption){R.className=S._sectionClasses.caption}D=R.insertCell(-1);D.id=S.idPrefix+"_caption_td";D.className="ui-state-active caption";D.colSpan=S._finalColSpan;if(g.isPlainObject(S.captionTooltip)){g(D).tooltip(S.captionTooltip)}else{if(!o(S.captionTooltip)){g(D).attr("title",S.captionTooltip).tooltip()}}if(typeof(S.caption)=="function"){S.caption(D)}else{g(D).text(S.caption)}}R=T.insertRow(-1);if(S._sectionClasses.footer){R.className=S._sectionClasses.footer}D=R.insertCell(-1);D.id=S.idPrefix+"_footer_td";D.colSpan=S._finalColSpan;g("<input/>").attr({type:"hidden",id:S.idPrefix+"_rowOrder",name:S.idPrefix+"_rowOrder"}).appendTo(D);if(S.hideButtons.append&&S.hideButtons.removeLast&&(!g.isArray(S.customFooterButtons)||S.customFooterButtons.length==0)){R.style.display="none"}else{if(!S.hideButtons.append){m(S.customGridButtons.append,"ui-icon-plusthick").attr({title:S._i18n.append}).addClass("append",S._buttonClasses.append).click(function(V){d(P,1,null,null);if(V&&V.preventDefault){V.preventDefault()}return false}).appendTo(D)}if(!S.hideButtons.removeLast){m(S.customGridButtons.removeLast,"ui-icon-closethick").attr({title:S._i18n.removeLast}).addClass("removeLast",S._buttonClasses.removeLast).click(function(V){j(P,null,this.value,false);if(V&&V.preventDefault){V.preventDefault()}return false}).appendTo(D)}if(S.customFooterButtons&&S.customFooterButtons.length){for(var M=S.customFooterButtons.length-1;M>=0;M--){var Q=S.customFooterButtons[M];if(Q&&Q.uiButton&&Q.click&&Q.atTheFront){g(D).prepend(r(P,Q))}}for(var M=0;M<S.customFooterButtons.length;M++){var Q=S.customFooterButtons[M];if(Q&&Q.uiButton&&Q.click&&!Q.atTheFront){g(D).append(r(P,Q))}}}}if(S.rowDragging){g(L).sortable({axis:"y",containment:P,handle:".rowDrag",helper:function(X,W){var Y=W.children();var V=W.clone();V.children().each(function(aa){g(this).width(Y.eq(aa).width());var Z=g("select",this);if(Z.length>0){for(var ac=0;ac<Z.length;ac++){var ab=Y.eq(aa).find("select");if(ab.length>ac){Z[ac].value=ab[ac].value}}}});return V},update:function(X,Y){var V=Y.item[0].id.substring(Y.item[0].id.lastIndexOf("_")+1);var W=Y.item[0].rowIndex-g("tr",H).length;q(P,Y.originalPosition.top>Y.position.top,V,W)}})}g(P).data("appendGrid",S);if(g.isArray(G.initData)){a(P,G.initData,true)}else{g(P).appendGrid("appendRow",S.initRows)}if(S._rowOrder.length==0){var K=g("<td></td>").text(S._i18n.rowEmpty).attr("colspan",S._finalColSpan);g("tbody",P).append(g("<tr></tr>").addClass("empty").append(K))}}return U},isReady:function(){var D=e(this,true);if(D){return true}return false},isDataLoaded:function(){var D=e(this);if(D){return D._isDataLoaded}return false},load:function(D){var E=e(this),F=this;if(E){if(D!=null&&D.length>0){a(F[0],D,false)}else{A(F[0])}}return F},appendRow:function(D){return this.appendGrid("insertRow",D)},insertRow:function(G,I,E){var H=e(this);if(H){if((g.isArray(G)&&G.length>0)||(g.isNumeric(G)&&G>0)){var D=this[0];insertResult=d(D,G,I,E);if(g.isNumeric(I)||g.isNumeric(E)){v(D,insertResult.rowIndex);var F=H._rowOrder[insertResult.addedRows[0]];g("#"+H.idPrefix+"_Insert_"+F,D).focus()}}}return this},removeRow:function(F,D){var E=e(this);if(E&&E._rowOrder.length>0){j(this[0],F,D,true)}return this},emptyGrid:function(){var D=e(this);if(D){A(this[0])}return target},moveUpRow:function(J,I){var E=e(this),H=this;if(E){var G=H[0],L,D,F,K=null;var M=G.getElementsByTagName("tbody")[0];if(g.isNumeric(J)&&J>0&&J<E._rowOrder.length){K=J;I=E._rowOrder[J];L=document.getElementById(E.idPrefix+"_Row_"+I,G)}else{if(g.isNumeric(I)){K=h(I,E);L=document.getElementById(E.idPrefix+"_Row_"+I,G)}}if(K!=null&&K>0){D=document.getElementById(E.idPrefix+"_Row_"+E._rowOrder[K-1],G);M.removeChild(L);M.insertBefore(L,D);E._rowOrder[K]=E._rowOrder[K-1];E._rowOrder[K-1]=I;F=g("td.first",D).html();g("td.first",D).html(g("td.first",L).html());g("td.first",L).html(F);b(G,E);g("td.last button.moveUp",L).removeClass("ui-state-hover").blur();g("td.last button.moveUp",D).focus();if(E.afterRowSwapped){E.afterRowSwapped(G,K,K-1)}}}return H},moveDownRow:function(J,I){var E=e(this),H=this;if(E){var G=H[0],L,D,F,K=null;var M=G.getElementsByTagName("tbody")[0];if(g.isNumeric(J)&&J>=0&&J<E._rowOrder.length-1){K=J;I=E._rowOrder[J];L=document.getElementById(E.idPrefix+"_Row_"+I,G)}else{if(g.isNumeric(I)){K=h(I,E);L=document.getElementById(E.idPrefix+"_Row_"+I,G)}}if(K!=null&&K!=E._rowOrder.length-1){D=document.getElementById(E.idPrefix+"_Row_"+E._rowOrder[K+1],G);M.removeChild(D);M.insertBefore(D,L);E._rowOrder[K]=E._rowOrder[K+1];E._rowOrder[K+1]=I;F=g("td.first",D).html();g("td.first",D).html(g("td.first",L).html());g("td.first",L).html(F);b(G,E);g("td.last button.moveDown",L).removeClass("ui-state-hover").blur();g("td.last button.moveDown",D).focus();if(E.afterRowSwapped){E.afterRowSwapped(G,K,K+1)}}}return H},showColumn:function(G){var H=e(this);if(H&&G){var F=-1,E=this[0];for(var I=0;I<H.columns.length;I++){if(H.columns[I].name==G){F=I;break}}if(F!=-1&&H.columns[F].invisible){H._visibleCount++;H._finalColSpan++;g("#"+H.idPrefix+"_caption_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_footer_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_"+G+"_td_head").removeClass("invisible");for(var I=0;I<H._rowOrder.length;I++){var D=H._rowOrder[I];g("#"+H.idPrefix+"_"+G+"_td_"+D).removeClass("invisible")}H.columns[F].invisible=false;b(E,H)}}return this},hideColumn:function(G){var H=e(this);if(H&&G){var F=-1,E=this[0];for(var I=0;I<H.columns.length;I++){if(H.columns[I].name==G){F=I;break}}if(F!=-1&&!H.columns[F].invisible){H._visibleCount--;H._finalColSpan--;g("#"+H.idPrefix+"_caption_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_footer_td").attr("colSpan",H._finalColSpan);g("#"+H.idPrefix+"_"+G+"_td_head").addClass("invisible");for(var I=0;I<H._rowOrder.length;I++){var D=H._rowOrder[I];g("#"+H.idPrefix+"_"+G+"_td_"+D).addClass("invisible")}H.columns[F].invisible=true;b(E,H)}}return this},isColumnInvisible:function(D){var E=e(this);if(E&&D){for(var F=0;F<E.columns.length;F++){if(E.columns[F].name==D){return E.columns[F].invisible}}}return null},getRowCount:function(){var D=e(this);if(D){return D._rowOrder.length}return null},getUniqueIndex:function(E){var D=e(this);if(D&&g.isNumeric(E)&&E<D._rowOrder.length){return D._rowOrder[E]}return null},getRowIndex:function(D){var E=e(this);if(E&&g.isNumeric(D)){for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==D){return F}}}return null},getRowValue:function(H,E,G){var F=e(this),D=null;if(F){if(g.isNumeric(H)&&H>=0&&H<F._rowOrder.length){E=F._rowOrder[H]}if(!o(E)){D=i(F,E,G)}}return D},getAllValue:function(F){var E=e(this),D=null;if(E){D=F?{}:[];for(var G=0;G<E._rowOrder.length;G++){if(F){rowValue=i(E,E._rowOrder[G],G);g.extend(D,rowValue)}else{rowValue=i(E,E._rowOrder[G]);D.push(rowValue)}}if(F){D._RowCount=E._rowOrder.length}}return D},getCtrlValue:function(D,G){var E=e(this);if(E&&G>=0&&G<E._rowOrder.length){for(var F=0;F<E.columns.length;F++){if(E.columns[F].name===D){return c(E,F,E._rowOrder[G])}}}return null},setCtrlValue:function(D,H,F){var E=e(this);if(E&&H>=0&&H<E._rowOrder.length){for(var G=0;G<E.columns.length;G++){if(E.columns[G].name==D){p(E,G,E._rowOrder[H],F);break}}}return this},getCellCtrl:function(E,H){var F=e(this);if(F&&H>=0&&H<F._rowOrder.length){var D=F._rowOrder[H];for(var G=0;G<F.columns.length;G++){if(F.columns[G].name===E){return x(F.columns[G].type,F.idPrefix,E,D)}}}return null},getCellCtrlByUniqueIndex:function(E,D){var F=e(this);if(F){for(var G=0;G<F.columns.length;G++){if(F.columns[G].name===E){return x(F.columns[G].type,F.idPrefix,E,D)}}}return null},getRowOrder:function(){var D=e(this);if(D){return D._rowOrder.slice()}return null},getColumns:function(){var D=e(this);if(D){return D.columns.slice()}return null},isRowEmpty:function(E){var D=e(this);if(D){return u(D,E)}return null},removeEmptyRows:function(){var E=e(this);if(E){var D=this[0];for(var F=E._rowOrder.length;F>=0;F--){if(u(E,F)){j(D,null,E._rowOrder[F],true)}}}}};function e(E,D){var F=null;if(E.length==1){F=E.data("appendGrid");if(!F&&!D){alert(t.notInit)}}else{if(!D){alert(t.getValueMultiGrid)}}return F}function d(V,L,T,Q){var ab=g(V).data("appendGrid");var aa=[],G=null,H,R,X=[];var I=V.getElementsByTagName("thead")[0];var O=V.getElementsByTagName("tbody")[0];var K=L,D=false;if(g.isArray(L)){K=L.length;D=true}if(g.isNumeric(Q)){for(var N=0;N<ab._rowOrder.length;N++){if(ab._rowOrder[N]==Q){T=N;if(N!=0){G=N-1}break}}}else{if(g.isNumeric(T)){if(T>=ab._rowOrder.length){T=null}else{G=T-1}}else{if(ab._rowOrder.length!=0){T=null;G=ab._rowOrder.length-1}}}if(ab._rowOrder.length==0){g("tr.empty",V).remove()}for(var N=0;N<K;N++){ab._uniqueIndex++;H=ab._uniqueIndex;X.length=0;if(g.isNumeric(T)){ab._rowOrder.splice(T,0,H);tbRow=O.insertRow(T);aa.push(T)}else{ab._rowOrder.push(H);tbRow=O.insertRow(-1);aa.push(ab._rowOrder.length-1)}tbRow.id=ab.idPrefix+"_Row_"+H;if(ab._sectionClasses.body){tbRow.className=ab._sectionClasses.body}g(tbRow).data("appendGrid",H);if(!ab.hideRowNumColumn){tbCell=tbRow.insertCell(-1);g(tbCell).addClass("ui-widget-content first").text(ab._rowOrder.length)}for(var P=0;P<ab.columns.length;P++){if(ab.columns[P].type=="hidden"){X.push(P);continue}var F="ui-widget-content";if(ab.columns[P].invisible){F+=" invisible"}tbCell=tbRow.insertCell(-1);tbCell.id=ab.idPrefix+"_"+ab.columns[P].name+"_td_"+H;tbCell.className=F;if(ab.columns[P].cellCss!=null){g(tbCell).css(ab.columns[P].cellCss)}var E=ab.idPrefix+"_"+ab.columns[P].name+"_"+H,M;if(typeof(ab.nameFormatter)=="function"){M=ab.nameFormatter(ab.idPrefix,ab.columns[P].name,H)}else{M=E}R=null;if(ab.columns[P].type=="custom"){if(typeof(ab.columns[P].customBuilder)=="function"){R=ab.columns[P].customBuilder(tbCell,ab.idPrefix,ab.columns[P].name,H)}}else{if(ab.columns[P].type=="select"){R=document.createElement("select");R.id=E;R.name=M;if(g.isArray(ab.columns[P].ctrlOptions)){if(ab.columns[P].ctrlOptions.length>0){if(g.isPlainObject(ab.columns[P].ctrlOptions[0])){var ad=null,Z=null;for(var S=0;S<ab.columns[P].ctrlOptions.length;S++){if(!o(ab.columns[P].ctrlOptions[S].group)){if(ad!=ab.columns[P].ctrlOptions[S].group){ad=ab.columns[P].ctrlOptions[S].group;Z=document.createElement("optgroup");Z.label=ad;R.appendChild(Z)}}else{Z=null}var U=g("<option/>").val(ab.columns[P].ctrlOptions[S].value).text(ab.columns[P].ctrlOptions[S].label);if(!o(ab.columns[P].ctrlOptions[S].title)){U.attr("title",ab.columns[P].ctrlOptions[S].title)}if(null==Z){U.appendTo(R)}else{U.appendTo(Z)}}}else{for(var S=0;S<ab.columns[P].ctrlOptions.length;S++){R.options[R.options.length]=new Option(ab.columns[P].ctrlOptions[S],ab.columns[P].ctrlOptions[S])}}}}else{if(g.isPlainObject(ab.columns[P].ctrlOptions)){for(var S in ab.columns[P].ctrlOptions){R.options[R.options.length]=new Option(ab.columns[P].ctrlOptions[S],S)}}else{if(typeof(ab.columns[P].ctrlOptions)=="string"){var Y=ab.columns[P].ctrlOptions.split(";");for(var S=0;S<Y.length;S++){var ac=Y[S].indexOf(":");if(-1==ac){R.options[R.options.length]=new Option(Y[S],Y[S])}else{R.options[R.options.length]=new Option(Y[S].substring(ac+1,Y[S].length),Y[S].substring(0,ac))}}}else{if(typeof(ab.columns[P].ctrlOptions)=="function"){ab.columns[P].ctrlOptions(R)}}}}tbCell.appendChild(R)}else{if(ab.columns[P].type=="checkbox"){R=document.createElement("input");R.type="checkbox";R.id=E;R.name=M;R.value=1;tbCell.appendChild(R);tbCell.style.textAlign="center"}else{if(ab.columns[P].type=="textarea"){R=document.createElement("textarea");R.id=E;R.name=M;tbCell.appendChild(R)}else{if(-1!=ab.columns[P].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){R=document.createElement("input");try{R.type=ab.columns[P].type}catch(J){}R.id=E;R.name=M;tbCell.appendChild(R)}else{R=document.createElement("input");R.type="text";R.id=E;R.name=M;tbCell.appendChild(R);if(ab.columns[P].type=="ui-datepicker"){g(R).datepicker(ab.columns[P].uiOption)}else{if(ab.columns[P].type=="ui-spinner"){g(R).spinner(ab.columns[P].uiOption)}else{if(ab.columns[P].type=="ui-autocomplete"){g(R).autocomplete(ab.columns[P].uiOption)}}}}}}}}if(ab.columns[P].type!="custom"){if(ab.columns[P].ctrlAttr!=null){g(R).attr(ab.columns[P].ctrlAttr)}if(ab.columns[P].ctrlProp!=null){g(R).prop(ab.columns[P].ctrlProp)}if(ab.columns[P].ctrlCss!=null){g(R).css(ab.columns[P].ctrlCss)}if(ab.columns[P].ctrlClass!=null){g(R).addClass(ab.columns[P].ctrlClass)}if(ab.columns[P].uiTooltip){g(R).tooltip(ab.columns[P].uiTooltip)}if(typeof(ab.columns[P].onClick)=="function"){g(R).click({caller:V,callback:ab.columns[P].onClick,uniqueIndex:H},function(ae){ae.data.callback(ae,g(ae.data.caller).appendGrid("getRowIndex",ae.data.uniqueIndex))})}if(typeof(ab.columns[P].onChange)=="function"){g(R).change({caller:V,callback:ab.columns[P].onChange,uniqueIndex:H},function(ae){ae.data.callback(ae,g(ae.data.caller).appendGrid("getRowIndex",ae.data.uniqueIndex))})}}if(D){p(ab,P,H,L[N][ab.columns[P].name])}else{if(!o(ab.columns[P].value)){p(ab,P,H,ab.columns[P].value)}}}if(!ab._hideLastColumn||ab.columns.length>ab._visibleCount){if(!ab.rowButtonsInFront){tbCell=tbRow.insertCell(-1)}else{if(!ab.hideRowNumColumn){tbCell=tbRow.insertCell(1)}else{tbCell=tbRow.insertCell(0)}}tbCell.className="ui-widget-content last";if(ab._hideLastColumn){tbCell.style.display="none"}if(!ab.hideButtons.insert){m(ab.customGridButtons.insert,"ui-icon-arrowreturnthick-1-w").attr({id:ab.idPrefix+"_Insert_"+H,title:ab._i18n.insert,tabindex:-1}).addClass("insert",ab._buttonClasses.insert).data("appendGrid",{uniqueIndex:H}).click(function(af){var ae=g(this).data("appendGrid").uniqueIndex;g(V).appendGrid("insertRow",1,null,ae);if(af&&af.preventDefault){af.preventDefault()}return false}).appendTo(tbCell)}if(!ab.hideButtons.remove){m(ab.customGridButtons.remove,"ui-icon-trash").attr({id:ab.idPrefix+"_Delete_"+H,title:ab._i18n.remove,tabindex:-1}).addClass("remove",ab._buttonClasses.remove).data("appendGrid",{uniqueIndex:H}).click(function(af){var ae=g(this).data("appendGrid").uniqueIndex;j(V,null,ae,false);if(af&&af.preventDefault){af.preventDefault()}return false}).appendTo(tbCell)}if(!ab.hideButtons.moveUp){m(ab.customGridButtons.moveUp,"ui-icon-arrowthick-1-n").attr({id:ab.idPrefix+"_MoveUp_"+H,title:ab._i18n.moveUp,tabindex:-1}).addClass("moveUp",ab._buttonClasses.moveUp).data("appendGrid",{uniqueIndex:H}).click(function(af){var ae=g(this).data("appendGrid").uniqueIndex;g(V).appendGrid("moveUpRow",null,ae);if(af&&af.preventDefault){af.preventDefault()}return false}).appendTo(tbCell)}if(!ab.hideButtons.moveDown){m(ab.customGridButtons.moveDown,"ui-icon-arrowthick-1-s").attr({id:ab.idPrefix+"_MoveDown_"+H,title:ab._i18n.moveDown,tabindex:-1}).addClass("moveDown",ab._buttonClasses.moveDown).data("appendGrid",{uniqueIndex:H}).click(function(af){var ae=g(this).data("appendGrid").uniqueIndex;g(V).appendGrid("moveDownRow",null,ae);if(af&&af.preventDefault){af.preventDefault()}return false}).appendTo(tbCell)}if(ab.rowDragging){g("<div/>").addClass("rowDrag ui-state-default ui-corner-all",ab._buttonClasses.rowDrag).attr("title",ab._i18n.rowDrag).append(g("<div/>").addClass("ui-icon ui-icon-carat-2-n-s").append(g("<span/>").addClass("ui-button-text").text("Drag"))).appendTo(tbCell)}for(var P=0;P<X.length;P++){R=document.createElement("input");R.id=ab.idPrefix+"_"+ab.columns[X[P]].name+"_"+H;R.name=R.id;R.type="hidden";if(D){R.value=L[N][ab.columns[X[P]].name]}else{if(!o(ab.columns[X[P]].value)){R.value=ab.columns[X[P]].value}}tbCell.appendChild(R)}if(ab.customRowButtons&&ab.customRowButtons.length){for(var P=ab.customRowButtons.length-1;P>=0;P--){var W=ab.customRowButtons[P];if(W&&W.uiButton&&W.click&&W.atTheFront){g(tbCell).prepend(z(V,W,H))}}for(var P=0;P<ab.customRowButtons.length;P++){var W=ab.customRowButtons[P];if(W&&W.uiButton&&W.click&&!W.atTheFront){g(tbCell).append(z(V,W,H))}}}}}b(V,ab);if(g.isNumeric(T)){if(typeof(ab.afterRowInserted)=="function"){ab.afterRowInserted(V,G,aa)}}else{if(typeof(ab.afterRowAppended)=="function"){ab.afterRowAppended(V,G,aa)}}return{addedRows:aa,parentIndex:G,rowIndex:T}}function r(D,F){var E=g("<button/>").attr({type:"button",tabindex:-1}).button(F.uiButton).click({tbWhole:D},F.click);if(F.btnClass){E.addClass(F.btnClass)}if(F.btnCss){E.css(F.btnCss)}if(F.btnAttr){E.attr(F.btnAttr)}return E}function z(E,G,D){var F=g("<button/>").val(D).attr({type:"button",tabindex:-1}).button(G.uiButton).click({tbWhole:E,uniqueIndex:D},function(H){var I=g(H.data.tbWhole).appendGrid("getRowValue",null,H.data.uniqueIndex);G.click(H,H.data.uniqueIndex,I)});if(G.btnClass){F.addClass(G.btnClass)}if(G.btnCss){F.css(G.btnCss)}if(G.btnAttr){F.attr(G.btnAttr)}return F}function j(E,K,D,H){var F=g(E).data("appendGrid");var J=E.getElementsByTagName("tbody")[0];if(g.isNumeric(D)){for(var I=0;I<F._rowOrder.length;I++){if(F._rowOrder[I]==D){K=I;break}}}if(g.isNumeric(K)){if(H||typeof(F.beforeRowRemove)!="function"||F.beforeRowRemove(E,K)){F._rowOrder.splice(K,1);J.deleteRow(K);b(E,F);v(E,K);if(typeof(F.afterRowRemoved)=="function"){F.afterRowRemoved(E,K)}}}else{if(H||typeof(F.beforeRowRemove)!="function"||F.beforeRowRemove(E,F._rowOrder.length-1)){D=F._rowOrder.pop();J.deleteRow(-1);b(E,F);if(typeof(F.afterRowRemoved)=="function"){F.afterRowRemoved(E,null)}}}if(F._rowOrder.length==0){var G=g("<td></td>").text(F._i18n.rowEmpty).attr("colspan",F._finalColSpan);g("tbody",E).append(g("<tr></tr>").addClass("empty").append(G))}}function A(D){var E=g(D).data("appendGrid");g("tbody",D).empty();E._rowOrder.length=0;E._uniqueIndex=0;b(D,E);if(E._rowOrder.length==0){var F=g("<td></td>").text(E._i18n.rowEmpty).attr("colspan",E._finalColSpan);g("tbody",D).append(g("<tr></tr>").addClass("empty").append(F))}}function v(D,G){var E=g(D).data("appendGrid");if(!E.hideRowNumColumn){for(var F=G;F<E._rowOrder.length;F++){g("#"+E.idPrefix+"_Row_"+E._rowOrder[F]+" td.first",D).text(F+1)}}}function a(J,F,I){var N,H,E,K,M;var G=g(J).data("appendGrid");if(G){N=J.getElementsByTagName("tbody")[0];g(N).empty();G._rowOrder.length=0;G._uniqueIndex=0;if(F!=null&&F.length){M=d(J,F.length,null,null);for(var D=0;D<M.addedRows.length;D++){for(var L=0;L<G.columns.length;L++){p(G,L,G._rowOrder[D],F[D][G.columns[L].name])}if(typeof(G.rowDataLoaded)=="function"){G.rowDataLoaded(J,D,F[D])}}}G._isDataLoaded=true;if(I){G.initData=null}g(J).data("appendGrid",G);if(typeof(G.dataLoaded)=="function"){G.dataLoaded(J,F)}}}function h(D,E){for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==D){return F}}return null}function o(D){return typeof(D)=="undefined"||D==null}function C(E,D){if(!o(E)&&g.isPlainObject(E)&&!o(E[D])){return E[D]}return null}function b(D,E){g(D).data("appendGrid",E);g("#"+E.idPrefix+"_rowOrder",D).val(E._rowOrder.join())}function B(E,D){var G=null;for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==D){return F}}return G}function i(G,E,I){var D={},F=null;for(var H=0;H<G.columns.length;H++){F=G.columns[H].name+(o(I)?"":"_"+I);D[F]=c(G,H,E)}return D}function c(H,F,D){var I=null,G=H.columns[F].type,E=H.columns[F].name;if(G=="checkbox"){I=x(G,H.idPrefix,E,D);if(I==null){return null}else{return I.checked?1:0}}else{if(G=="custom"){if(typeof(H.columns[F].customGetter)=="function"){return H.columns[F].customGetter(H.idPrefix,E,D)}else{return null}}else{I=x(G,H.idPrefix,E,D);if(I==null){return null}else{return I.value}}}}function x(F,G,E,D){return document.getElementById(G+"_"+E+"_"+D)}function p(H,F,D,I){var G=H.columns[F].type;var E=H.columns[F].name;if(G=="checkbox"){x(G,H.idPrefix,E,D).checked=(I!=null&&I!=0)}else{if(G=="custom"){if(typeof(H.columns[F].customSetter)=="function"){H.columns[F].customSetter(H.idPrefix,E,D,I)}}else{x(G,H.idPrefix,E,D).value=(I==null?"":I)}}}function q(E,J,D,F){var G=g(E).data("appendGrid");var I=-1;for(var H=0;H<G._rowOrder.length;H++){if(G._rowOrder[H]==D){if(J){I=F;G._rowOrder.splice(H,1);G._rowOrder.splice(F,0,D)}else{I=H;G._rowOrder.splice(F+1,0,D);G._rowOrder.splice(H,1)}break}}v(E,I);b(E,G);if(typeof(G.afterRowDragged)=="function"){G.afterRowDragged(E,F)}}function m(F,D){var E=null;if(F){if(typeof(F)=="function"){E=g(F())}else{if(F.nodeType){E=g(F).clone()}else{if(F.icons){E=g("<button/>").attr({type:"button"}).button(F)}}}}if(!E){E=g("<button/>").attr({type:"button"}).button({icons:{primary:D},text:false})}return E}function u(H,J){for(var I=0;I<H.columns.length;I++){var E=H._rowOrder[J];var G=c(H,I,E);if(typeof(H.columns[I].emptyCriteria)=="function"){if(!H.columns[I].emptyCriteria(G)){return false}}else{var D=null;if(!o(H.columns[I].emptyCriteria)){D=H.columns[I].emptyCriteria}else{if(H.columns[I].type=="checkbox"){D=0}else{if(H.columns[I].type=="select"){var F=x(H.columns[I].type,H.idPrefix,H.columns[I].name,E).options;if(F.length>0){D=F[0].value}else{D=""}}else{D=""}}}if(G!=D){return false}}}return true}g.fn.appendGrid=function(D){if(k[D]){return k[D].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof(D)==="object"||!D){return k.init.apply(this,arguments)}else{g.error(t.notSupportMethod+D)}}}})(jQuery);